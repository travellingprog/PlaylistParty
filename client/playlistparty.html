<head>
  <title>Playlist Party</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="http://connect.soundcloud.com/sdk.js"></script>
  <script src="https://w.soundcloud.com/player/api.js"></script>
</head>

<body>
  {{> page}}
</body>

<template name="page">
  {{#isolate}}
    {{#if showPhoneSearch}}
      {{> phoneSearch}}
    {{/if}}
  {{/isolate}}

  {{> header}}
  {{> tabs}}
  {{> controls}}
</template>


<template name="header">
  <div id="header">

    <!-- Left -->
    <div class="left">

      <!-- Tablet and Desktop: Logo -->
      <div class="hidden-phone logo">
        <img src="/LargeLogo.png" width="190" height="74" alt="logo">
      </div>

      <!-- Phone: Menu -->
      <div class="visible-phone phoneMenu">
        <div class="btn-group">
          <a class="btn dropdown-toggle btn-primary" data-toggle="dropdown" href="/"><span class="caret"></span> Menu</a>

          <ul id="phoneMenuDD" class="dropdown-menu">
            <li class="disabled"><a data-target="#tracks" href="/" class="tabLink"><i class="icon-th-large"></i> Grid View </a></li>
            <li><a data-target="#list" href="/" class="tabLink"><i class="icon-th-list"></i> List View </a></li>
            <li><a data-target="#settings" href="/" class="tabLink"><i class="icon-cog"></i> Settings </a></li>
            <!-- Portrait Phone options only: -->
            <li class="porPhone"><a href="/"><span class="label label-success"><i class="icon-envelope icon-white"></i>  INVITE</span></a></li>
            <li class="porPhone divider"></li>
            <li class="porPhone"><a class="shuffle" href="/"><i class="icon-random"></i> Shuffle ({{shuffleStatus}})</a></li>
            <li class="porPhone"><a class="loop" href="/"><i class="icon-repeat"></i> Loop ({{loopStatus}})</a></li>
          </ul>
        </div>

        <!-- landscape phone button only: -->
        <button type="button" class="lsPhone btn btn-success"><strong>Invite</strong></button>
      </div>
    </div>


    <!-- Middle -->
    <div class="middle">
      
      <!-- Tablet and Desktop: Menu and Playlist Name -->
      <div class="hidden-phone">
        <div class="playlistName">
          <h3>{{playlistName}}</h3>
        </div>
        <div id="deskMenu" class="btn-toolbar">
            <div class="btn-group" data-toggle="buttons-radio">
              <button data-target="#tracks" data-toggle="tab" type="button" class="grid btn btn-primary active"><i class="icon-th-large icon-white"></i> Grid View</button>
              <button data-target="#list" data-toggle="tab" type="button" class="btn btn-primary"><i class="icon-th-list"></i> List View</button>
              <button data-target="#settings" data-toggle="tab" type="button" class="btn btn-primary"><i class="icon-cog"></i> Settings</button>
            </div>
            <button type="button" class="invite btn btn-success"><strong>Invite</strong></button>
        </div>        
      </div>

      <!-- Phone: Logo -->
      <div class="visible-phone logo">
        <img src="/SmallLogo2.png" width="50" height="50" alt="logo">
      </div>
    </div>


    <!-- Right: Search -->
    <div class="right">
      
      <!-- Tablet, Desktop and Landscape Phone: -->
      <form class="lsPhone form-search">
        <div class="input-append">
          <input id="normSearchField" type="text" class="search-query" placeholder="Search...">
          <button id="normSearchBtn" data-target="#search" type="button" class="btn btn-primary"><i class="icon-search icon-white"></i></button>
        </div>
      </form>
        
      <!-- portrait phone: -->
      <div class="visible-phone porPhone porPhoneSearch">
        <button id="phoneSearchBtn"  data-target="#search" type="button" class="btn btn-primary"><i class="icon-search icon-white"></i></button>
      </div>
    </div>

  </div>
</template>


<template name="tabs">
  <div class="tab-content">
    <div id ="tracks" class="tab-pane active">
      {{> tracks}}
    </div>
    <div id="list" class="tab-pane">
      <strong>List: coming soon...</strong>
    </div>
    <div id="settings" class="tab-pane">
      <strong>Settings: coming soon...</strong>
    </div>
    <div id="search" class="tab-pane">
      {{> search}}
    </div>
</template>


<template name="tracks">
  {{#if APIsReady}}
    {{#each items}}
      {{> player}}
    {{/each}}
  {{/if}}
</template>


<template name="player">
  <div class="span-custom">
    <div class ="player {{isCurrent}}">
      <span class="badge badge-inverse">{{trackNo}}</span><br>
      {{artist}}<br>
      <strong>{{title}}</strong>
      {{#constant}}
      <div id="{{_id}}"></div>
      {{/constant}}
      <div class="player-bottom">
        added by <span class="userID">{{addedBy}}</span><br>
        {{#if myItem}}
          <button type="button" class="remItem btn btn-link">remove</button>
        {{else}}
          <button type="button" class="btn btn-mini btn-success" style="float: left"><i class="icon-thumbs-up icon-white"></i> Nice!</button>
          <p class="text-right">0 <i class="icon-thumbs-up"></i></p>
        {{/if}}
      </div>
    </div>
  </div>
</template>


<template name="controls">
  <div id="footer">    
    <div id="controlbox" class="{{isHidden}}">
      {{#constant}}
      <div id="timeslider"></div>
      {{/constant}}
      <span id="timeIndicator">{{curTime}} / {{totalTime}} </span> 
      <p id="trackIndicator" class="text-right">{{curTrack}} of {{numTracks}}</p>
      <div id="bottom-controls">
        <button id="minControls" type="button" class="btn btn-link btn-mini"><i class="icon-chevron-down"></i></button>
        <button type="button" class="shuffle lsPhone btn btn-link btn-mini"><img src="{{shufflePic}}" width="16" height="14"></img></button>
        <button type="button" class="loop lsPhone btn btn-link btn-mini"><img src="{{loopPic}}" width="14" height="14"></i></button>
        <button id="prev" type="button" class="btn btn-danger"><img src="/Prev.png" width="16" height="14"></button>
        <button id="play" type="button" class="btn btn-danger"><img src="{{playOrPause}}" width="21" height="21"></button>
        <button id="next" type="button" class="btn btn-danger"><img src="/Next.png" width="16" height="14"></button>
        <button id="minVolume" type="button" class="lsPhone btn btn-link btn-mini"><i class="icon-volume-off"></i></button>
        {{#constant}}
        <div id="volumeslider" class ="lsPhone"></div>
        {{/constant}}
        <button id="maxVolume" type="button" class="lsPhone btn btn-link btn-mini"><i class="icon-volume-up"></i></button>
        <!-- Portrait Phone: Volume -->
        <div id ="phoneVol" class="visible-phone porPhone btn-group">
          <button id="volumeDown" type="button" class="btn btn-danger"><i class="icon-volume-down icon-white"></i></button>
          <button id="volumeUp" type="button" class="btn btn-danger"><i class="icon-volume-up icon-white"></i></button>
        </div>
      </div>
    </div>
    <div id="controlbox-minimized" class="{{isHidden2}}">
      <button id="openControls" type="button" class="btn btn-link btn-small"><i class="icon-chevron-up"></i></button>
    </div>
  </div>
</template>


<template name="search">
  {{#if searching}}
    <div id="searchTop" style="text-align: center; margin: 10px 0 20px 0;"><span class="badge badge-important">Search Results for "{{query}}"</span></div>

    <!-- YouTube -->
    <div class="searchEngine">
      <div class="APIlogo"><a href="http://www.youtube.com"><img src="/YtLogo.png" width="95" height="40" alt="Youtube Logo"></a></div>
      <div class = "results">
        {{#if ytSearchComplete}}
          {{#if noYtSearchError}}
            {{#each ytResults}}
              <div class="span-custom">
                <div class="singleResult {{selected}}">
                  <p>{{artist}}</p>
                  <p><strong>{{title}}</strong></p>
                  <p><img src="{{pic}}"></p>
                  <button class="{{hideAdd}} addItem btn btn-success">Add</button>
                  <button class="selectItem btn btn-warning">{{SelectOrUnselect}}</button>
                </div>
              </div>
            {{/each}}
          {{else}}
            <span class="label label-inverse">SEARCH ERROR</span>
            {{ytErrorMsg}}
          {{/if}}
        {{else}}
          <span class="label label-info">Loading...</span>
        {{/if}}
      </div>
      <div class = "btn-toolbar">
        <div class="btn-group">
          <button id="ytPrev" class="btn btn-danger {{disableYtPrev}}">Prev</button>
          <button id="ytNext" class="btn btn-danger {{disableYtNext}}">Next</button>
        </div>
        <button class="addSelection {{hideMultSel}} btn btn-success">Add Selection ({{selNum}})</button>
        <button class="btn cancel">Cancel</button>
      </div>
    </div>

    <!-- SoundCloud -->
    <div class="searchEngine">    
      <div class="APIlogo"><a href="http://www.soundcloud.com"><img src="/ScLogo.png" width="64" height="43" alt="SoundCloud Logo"></a></div>
      <div class = "results">
        {{#if scSearchComplete}}
          {{#if noScSearchError}}
            {{#each scResults}}
              <div class="span-custom">
                <div class="singleResult {{selected}}">
                  <p>{{artist}}</p>
                  <p><strong>{{title}}</strong></p>
                  <p>{{duration}}</p>
                  <p><img style="background-color: DarkGray;" src="{{pic}}"></p>
                  <button class="{{hideAdd}} addItem btn btn-success">Add</button>
                  <button class="selectItem btn btn-warning">{{SelectOrUnselect}}</button>
                </div>
              </div>
            {{/each}}
          {{else}}
            <p><span class="label label-inverse">SEARCH ERROR</span></p>
            <p>{{scErrorMsg}}</p>
          {{/if}}
        {{else}}
          <span class="label label-info">Loading...</span>
        {{/if}}
      </div>
      <div class = "btn-toolbar">
        <div class="btn-group">
          <button id="scPrev" class="btn btn-danger {{disableScPrev}}">Prev</button>
          <button id="scNext" class="btn btn-danger {{disableScNext}}">Next</button>
        </div>
        <button class="addSelection {{hideMultSel}} btn btn-success">Add Selection ({{selNum}})</button>
        <button class="btn cancel">Cancel</button>
      </div>
    </div>
  {{/if}}
</template>


<template name ="phoneSearch">
  <div class="modal">
    <div class="modal-header">
      <button type="button" class="close cancel">&times;</button>
      <h3>Search</h3>
    </div>

    <div class="modal-body">
      <input id="phoneSearchField" type="text">
    </div>

    <div class="modal-footer">
      <button class="btn cancel">Cancel</button>
      <button id="phoneSearchBtn2" class="btn btn-primary">Search</button>
    </div>
  </div>  
</template>